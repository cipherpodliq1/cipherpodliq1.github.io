# TU-Sofia - УПР 5: Разработка на програми с използване на функции.

**Здравейте**

В днешното упражнение ще разгледаме как се създават и използват функции.

## Кратко съдържание:

- **Подаване на параметри** 
- **Връщане на резултат**
- **Стойност по подразбиране**

---

# 1. Функции в Python

В програмирането функцията е самостоятелен блок код, който съдържа конкретна задача или група от взаимно свързани задачи. Всеки път когато извикаме тази функция, кодът който е вътре в нея ще се изпълни , в последователността в която е написан. Често фунцкиите се използват за да "капсулират" дадена последователност, за да може тя да бъде използвана отново и отново в друг файл, без да се налага да я пренаписваме отново.Ето някой вградени функции, предоставени от Python :

- id() - взема един аргумент и връща уникалния идентификатор на този обект;

```python
s = "foobar"
id(s)
#56313440
```

- len() - връща дължината на аргумента

```python
a = ['foo' , 'bar' , 'baz' , 'qux']
len(a)
# 4
```
- any() - приема аргумента като итерация и връща "True", ако някой от елементите е "истина", и обратното.

Всяка от тези функции изпълнява определена задача. Кодът, който изпълнява задачата, е дефиниран някъде, но не е нужно да се знае къде или дори как работи (Това е в общи линии ["капсулирането"](https://bg.wikipedia.org/wiki/%D0%9A%D0%B0%D0%BF%D1%81%D1%83%D0%BB%D0%B8%D1%80%D0%B0%D0%BD%D0%B5_(%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%B8%D1%80%D0%B0%D0%BD%D0%B5))). Всичко, което трябва да се знае, е интерфейсът на функцията:
- Какви аргументи са необходими
- Какви стойности връща

След това се извиква функцията и се подават съответните аргументи. Изпълнението на програмата отива в определената част от кода. Когато функцията приключи, изпълнението се връща към кода, от мястото, където е спрял. Функцията може да връща или да не връща данни, които кодът да използва. 

Когато се дефинира собствена функция на Python, тя работи по същия начин. От някъде в кода ще бъде извикана съответната функция на Python и изпълнението на програмата ще се прехвърли в тялото на кода на функцията.

Когато функцията приключи, изпълнението се връща на мястото, където функцията е била извикана. В зависимост от това как е проектирана на функцията, данните могат да се предават при извикване на функцията, а връщаните стойности могат да се предават обратно, когато приключи. Обичайният синтаксис за дефиниране на функция в Python е следният:

```python
def <function_name>([<parameters>]):
    <statement(s)> # неща които трябва да се случат
```

 - def- ключовата дума, която информира Python, че се дефинира функция;

- function_name - идентификатор на Python, който именува функцията;
  
- parameters - (по избор) списък с параметри, разделени със запетая, които могат да бъдат подаени към функцията;
  
 - *:* - пунктуация, която обозначава края на хедъра (header) на функцията (списък с имена и параметри)

- statement (s) - блок от валидни твърдения (statements) на Python
  
Последният елемент, <statement (s)>, се нарича тяло (body) на функцията. Тялото е блок от твърдения (statements), които ще бъдат изпълнени при извикване на функцията.

Синтаксисът за извикване на функция на Python е следният:

```python
<function_name>([<arguments>])
```

- arguments - стойностите, подадени към функцията. Те съответстват на <parameters> в дефинирането на функцията. Може да се дефинирате функция, която не приема никакви аргументи, но скобите са задължителни. И дефинирането на функция, и извикването на функция винаги трябва да включва скоби, дори и да са празни.

### Пример : 

```python
def f():
 s = '-- Inside f()'
 print(s)

print('Before calling f()')
f()
print('After calling f()')
```

## Предаване на аргументи

### Позиционни аргументи

Най -простият начин за предаване на аргументи в една функция на Python е с позиционни аргументи (наричани още задължителни аргументи). В
дефинирането на функцията се посочва разделен със запетая списък на параметрите в скобите:

```python
def f(qty, item, price):
    print(f'{qty} {item} cost ${price:.2f}')
```
Когато функцията е извикана, се посочва съответния списък с аргументи:

```python
f(6, 'bananas', 1.74)
# 6 bananas cost $1.74
```

Параметрите (qty, item, price) се държат като променливи, които са дефинирани локално за функцията. Когато функцията е извикана, аргументите, които се предават (6, 'bananas', 1.74) отговарят на параметрите по ред, подобно на присвояване на променлива. Въпреки че позиционните аргументи са най - простият начин за предаване на данни към функция, те също така позволяват *най-малко гъвкавост*. Като начало редът на аргументите в извикването трябва да съвпада с реда на параметрите в дефинирането. При позиционни аргументи, аргументите в извикването и параметрите в дефинирането трябва да се съгласуват не само по ред, но и по брой. Това е причината позиционните аргументи да се наричат и задължителни. Не можете да пропуснете нищо при извикване на функцията:


```python
Too few arguments
f(6, 'bananas')
Traceback (most recent call last):
File "<pyshell#6>", line 1, in <module>
f(6, 'bananas')
TypeError: f() missing 1 required positional argument:
'price'
```
Нито мoже да се посочат допълнителни:

```python
>>> # Too many arguments
>>> f(6, 'bananas', 1.74, 'kumquats')
Traceback (most recent call last):
File "<pyshell#5>", line 1, in <module>
f(6, 'bananas', 1.74, 'kumquats')
TypeError: f() takes 3 positional arguments but 4 were
given
```
### Аргументи- ключови думи

Когато се извиква функция, може да се посочат аргументи във формата <keyword> = <value>. В този случай всяка <ключова дума(keyword)> трябва да съответства на параметър в дефинирането на функцията на Python. Например, предварително дефинираната функция f () може да бъде извикана с ключови аргументи, както следва:

```python
f(qty=6, item='bananas', price=1.74)
#6 bananas cost $1.74
```

Използването на ключова дума, която не съответства на нито един от декларираните параметри, генерира изключение:

```python
f(qty=6, item='bananas', cost=1.74)
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
TypeError: f() got an unexpected keyword argument 'cost'
```

### Параметри по подразбиране (default)

## Излизане от функция

"Return" предизвиква незабавно излизане от блока на функцията и предава управлението на изпълнението обратно на викащата функция (main функцията)

```python
def f():
  print('foo')
  print('hasmi')
  return
```

В този пример , *Return* е излишен. Функцията f ще се върне сама към main функцията след изпълнение на последния ред от нейното тяло. Тоест независимо от това дали имаме Return или не , f ще се държи по един и същи начин. Return обаче не е задължително да бъде в края на функцията. Може да се появи навсякъде в тялото на функцията или дори няколко пъти :

```python
def f(x):
  if x < 0:
    return
  if x > 100:
    return
  print(x)
```

Първите две извиквания на горната функция не дават резултат на изхода, тъй като "return" се изпълнява и функцията излиза преждевременно, преди да достигне своя print . Това може да бъде полезно при проверка на грешки във 


