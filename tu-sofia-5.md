# TU-Sofia - УПР 5: Разработка на програми с използване на функции.

**Здравейте**

В днешното упражнение ще разгледаме как се създават и използват функции.

## Кратко съдържание:

- **Подаване на параметри** 
- **Връщане на резултат**
- **Стойност по подразбиране**

---

# 1. Функции в Python

В програмирането функцията е самостоятелен блок код, който съдържа конкретна задача или група от взаимно свързани задачи. Всеки път когато извикаме тази функция, кодът който е вътре в нея ще се изпълни , в последователността в която е написан. Често фунцкиите се използват за да "капсулират" дадена последователност, за да може тя да бъде използвана отново и отново в друг файл, без да се налага да я пренаписваме отново.Ето някой вградени функции, предоставени от Python :

- id() - взема един аргумент и връща уникалния идентификатор на този обект;

```python
s = "foobar"
id(s)
#56313440
```

- len() - връща дължината на аргумента

```python
a = ['foo' , 'bar' , 'baz' , 'qux']
len(a)
# 4
```
- any() - приема аргумента като итерация и връща "True", ако някой от елементите е "истина", и обратното.

Всяка от тези функции изпълнява определена задача. Кодът, който изпълнява задачата, е дефиниран някъде, но не е нужно да се знае къде или дори как работи (Това е в общи линии ["капсулирането"](https://bg.wikipedia.org/wiki/%D0%9A%D0%B0%D0%BF%D1%81%D1%83%D0%BB%D0%B8%D1%80%D0%B0%D0%BD%D0%B5_(%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%B8%D1%80%D0%B0%D0%BD%D0%B5))). Всичко, което трябва да се знае, е интерфейсът на функцията:
- Какви аргументи са необходими
- Какви стойности връща

След това се извиква функцията и се подават съответните аргументи. Изпълнението на програмата отива в определената част от кода. Когато функцията приключи, изпълнението се връща към кода, от мястото, където е спрял. Функцията може да връща или да не връща данни, които кодът да използва. 

Когато се дефинира собствена функция на Python, тя работи по същия начин. От някъде в кода ще бъде извикана съответната функция на Python и изпълнението на програмата ще се прехвърли в тялото на кода на функцията.

Когато функцията приключи, изпълнението се връща на мястото, където функцията е била извикана. В зависимост от това как е проектирана на функцията, данните могат да се предават при извикване на функцията, а връщаните стойности могат да се предават обратно, когато приключи. Обичайният синтаксис за дефиниране на функция в Python е следният:

```python
def <function_name>([<parameters>]):
    <statement(s)> # неща които трябва да се случат
```

 - def- ключовата дума, която информира Python, че се дефинира функция;

- function_name - идентификатор на Python, който именува функцията;
  
- parameters - (по избор) списък с параметри, разделени със запетая, които могат да бъдат подаени към функцията;
  
 - *:* - пунктуация, която обозначава края на хедъра (header) на функцията (списък с имена и параметри)

- statement (s) - блок от валидни твърдения (statements) на Python
  
Последният елемент, <statement (s)>, се нарича тяло (body) на функцията. Тялото е блок от твърдения (statements), които ще бъдат изпълнени при извикване на функцията.

Синтаксисът за извикване на функция на Python е следният:

```python
<function_name>([<arguments>])
```

- arguments - стойностите, подадени към функцията. Те съответстват на <parameters> в дефинирането на функцията. Може да се дефинирате функция, която не приема никакви аргументи, но скобите са задължителни. И дефинирането на функция, и извикването на функция винаги трябва да включва скоби, дори и да са празни.

### Пример : 

```python
def f():
 s = '-- Inside f()'
 print(s)

print('Before calling f()')
f()
print('After calling f()')
```

## Предаване на аргументи

### Позиционни аргументи

Най -простият начин за предаване на аргументи в една функция на Python е с позиционни аргументи (наричани още задължителни аргументи). В
дефинирането на функцията се посочва разделен със запетая списък на параметрите в скобите:

```python
def f(qty, item, price):
    print(f'{qty} {item} cost ${price:.2f}')
```
Когато функцията е извикана, се посочва съответния списък с аргументи:

```python
f(6, 'bananas', 1.74)
# 6 bananas cost $1.74
```

Параметрите (qty, item, price) се държат като променливи, които са дефинирани локално за функцията. Когато функцията е извикана, аргументите, които се предават (6, 'bananas', 1.74) отговарят на параметрите по ред, подобно на присвояване на променлива. Въпреки че позиционните аргументи са най - простият начин за предаване на данни към функция, те също така позволяват *най-малко гъвкавост*. Като начало редът на аргументите в извикването трябва да съвпада с реда на параметрите в дефинирането. При позиционни аргументи, аргументите в извикването и параметрите в дефинирането трябва да се съгласуват не само по ред, но и по брой. Това е причината позиционните аргументи да се наричат и задължителни. Не можете да пропуснете нищо при извикване на функцията:


```python
Too few arguments
f(6, 'bananas')
Traceback (most recent call last):
File "<pyshell#6>", line 1, in <module>
f(6, 'bananas')
TypeError: f() missing 1 required positional argument:
'price'
```
Нито мoже да се посочат допълнителни:

```python
>>> # Too many arguments
>>> f(6, 'bananas', 1.74, 'kumquats')
Traceback (most recent call last):
File "<pyshell#5>", line 1, in <module>
f(6, 'bananas', 1.74, 'kumquats')
TypeError: f() takes 3 positional arguments but 4 were
given
```
### Аргументи- ключови думи

Когато се извиква функция, може да се посочат аргументи във формата <keyword> = <value>. В този случай всяка <ключова дума(keyword)> трябва да съответства на параметър в дефинирането на функцията на Python. Например, предварително дефинираната функция f () може да бъде извикана с ключови аргументи, както следва:

```python
f(qty=6, item='bananas', price=1.74)
#6 bananas cost $1.74
```

Използването на ключова дума, която не съответства на нито един от декларираните параметри, генерира изключение:

```python
f(qty=6, item='bananas', cost=1.74)
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
TypeError: f() got an unexpected keyword argument 'cost'
```

### Параметри по подразбиране (default)

Ако параметър, посочен в дефинирането на функция на Python, има формата <name>=<value>, тогава <value> става стойност по подразбиране за този параметър. Параметрите, дефинирани по този начин, се наричат параметри по
подразбиране или опционални:

```python
def f(qty=6, item='bananas', price=1.74):
    print(f'{qty} {item} cost ${price:.2f}')
f(4, 'apples', 2.24)
#4 apples cost $2.24

f(4)
4 bananas cost $1.74
 f()
#6 bananas cost $1.74

f(item='kumquats', qty=9)
#9 kumquats cost $1.74
f(price=2.29)
#6 bananas cost $2.29
```

⚠️Позиционните агументи трябва да отговарят по ред и номер с параметрите, декларирани при дефинирането на функцията.

⚠️Аргументите- ключови думи трябва да съвпадат с декларираните параметри по номер, но могат да бъдат посочени в произволен ред.

⚠️Параметрите по подразбиране позволяват някои аргументи да бъдат пропуснати при извикване на функцията.

### Връщане на резултат
Една от възможностите е да се използва function return value. Return statement в една функция на Python има две приложения:
- незабавно прекратява функцията и предава управлението на изпълнението обратно на викащия функцията;
- осигурява механизъм, чрез който функцията може да предава данни обратно на викащия функцията.

## Излизане от функция

"Return" предизвиква незабавно излизане от блока на функцията и предава управлението на изпълнението обратно на викащата функция (main функцията)

```python
def f():
  print('foo')
  print('hasmi')
  return
```

В този пример , *Return* е излишен. Функцията f ще се върне сама към main функцията след изпълнение на последния ред от нейното тяло. Тоест независимо от това дали имаме Return или не , f ще се държи по един и същи начин. Return обаче не е задължително да бъде в края на функцията. Може да се появи навсякъде в тялото на функцията или дори няколко пъти :

```python
def f(x):
  if x < 0:
    return
  if x > 100:
    return
  print(x)
```

Първите две извиквания на функцията f () не дават резултат на изхода, тъй като „return“ се изпълнява и функцията излиза преждевременно, преди да се достигне „print ()“ на ред 6. Това може да бъде полезно за проверка на грешки във функцията. Могат да се проверят няколко условия за грешка в началото на функцията, като „return“ ще сигнализира, ако има проблем:

```python
def f():
    if error_cond1:
        return
    if error_cond2:
        return
    if error_cond3:
        return
<normal processing>
```

Ако не са налице нито едно от условията за грешка, тогава функцията може да продължи с нормалната си обработка.

### Връщане на данни към викащия функцията
„Return“ също се използва и за предаване на данни обратно към викащия. Ако „return“ във функция на Python е последвана от израз, тогава в извикващата среда извикването на функцията оценява стойността на този израз:

```python
def f():
    return 'foo'

s = f()
s
#'foo'
```

Тук стойността на израза f () в ред 5 е „foo“, която впоследствие се присвоява на променлива s. Функцията може да върне всеки тип обект. В Python това означава почти всичко. В извикващата среда извикването на функция може да се използва синтактично по всякакъв начин, който има смисъл за типа обект, който функцията връща.
Например в този код f () връща речник. В извикващата среда тогава изразът f () представлява речник, а f () ['baz'] е валидна ключова референция в този речник:

```python
def f():
    return dict(foo=1, bar=2, baz=3)

f()
{'foo': 1, 'bar': 2, 'baz': 3}
f()['baz']
3
```

## Задачи:
1. Напишете програма, която намира лицето на геометрична фигура като първо се въвежда вида на фигурата:
   
1- квадрат
2-правоъгълник
3- прав.триъгълник

За пресмятане на лицето на отделните фигури да се напишат подходящи функции.

2. Напишете потребителска функция , проверяваща дали число е палиндром.
Функцията получава като аргумент число, връща като резултат 1, ако числото е
палиндром и 0 ако числото не е палиндром.

3. Програма, която реализира калкулатор за цели числа. Действията които
изпълнява са :
Събиране +
Изваждане –
Умножение *
Деление /

Потребителя въвежда вида на операцията. После въвежда две числа и резултата се извежда на екрана . Реализирайте отделни функции за отделните операции.

5. На функция се подават два аргумента: списък с числа и число. Променете
всички елементи от списъка със стойност по-голяма от даденото число на 0(нула).
