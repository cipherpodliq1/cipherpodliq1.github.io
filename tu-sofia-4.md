### TU-Sofia - УПР 4: Сложни типове данни

**Здравейте**

В днешното упражнение ще разгледаме **сложни типове данни** и тяхното приложение в разработването на софтуер.

## Кратко съдържание:

- **Създаване на приложения** с използване на сложни типове данни
- **Добавяне**, изтриване и промяна на елементи в списък
- **Търсене в списък**
- **Множества** и тяхното приложение
- **Работа с речник** (dictionary)

---

# 1. Списък

Първият тип данни, който ще разгледаме, е **Списък** (*list*). Списъците в Python представляват съвкупност от елементи, които могат да бъдат от всякакъв вид (числа, стрингове, кортежи, обекти и т.н.). При списъка може да достъпите даден елемент по индекс, като номерацията на елементите започва от **0**. Списъкът се отнася към **изменяемите типове данни**.

Примерен код:

```python
s = [1, 3, 4, 7]
print(s[1])  # Принтиране на елемент с индекс 1
s[1] = 11    # Присвояване на нова стойност на елемент с индекс 1
print(s)     # Принтиране на обновения списък
```
На първия ред от този код създаваме списък с 4 елемента. На следващия ред принтираме стойността на елемента с индекс 1. След като присвояваме нова стойност на същия елемент, той вече има стойност 11.

Как създаваме списък?
а/ Създаване на списък с list()
Може да създадем списък, използвайки функцията list(), на която подаваме елементите на списъка. Ако не подадем нищо, тогава се създава празен списък:

```python
s = list()  # Празен списък

s1 = list('Python')
print(s1)   # ['P', 'y', 't', 'h', 'o', 'n']
```

б/ Създаване на списък с елементи в квадратни скоби
Може да подадем всички елементи на списъка в квадратни скоби, като елементите могат да са от различен тип:

```python
s = ["P", "A", 3, "Y"]
print(s)  # ['P', 'A', 3, 'Y']
```

в/ Формиране на списък елемент по елемент с append()
Може да добавяме елементи един по един към списъка, използвайки метода append():
```python
s = []
s.append(5)   # Добавяме елемент 5
s.append(10)  # Добавяме елемент 10
s.append(20)  # Добавяме елемент 20
print(s)      # [5, 10, 20]
```

## Операции със списък

### Достъпване на елемент
Използват се **квадратни скоби [ ]**, като в тях се посочва индексът на елемента, който искаме да достъпим (т.е. позицията на елемента в списъка). Ако се опитате да достъпите **несъществуващ елемент**, ще получите грешка:

**`IndexError: list out of range`**

⚠️ **Задача:** Опитайте се да хванете тази грешка в задачите, които предстои да решите! ⚠️

Също така, **индексът може да бъде отрицателен**, което означава, че броенето започва от края на списъка.

---

### Оператор за присвояване
**Операторът `=`** се използва за присвояване на стойност на **единичен елемент** от списъка или за присвояване на стойност на **целия списък**.

Пример:

```python
s = [2, 4, 6, 8]
s[0] = 7  # Присвояване на нова стойност на елемента с индекс 0
print(s[0])  # Принтиране на обновената стойност на елемента
```

Операция "извличане на сечение"
Тази операция връща посочен фрагмент от списъка:

[<начало>:<край>:<стъпка>]

Нито един от тези параметри не е задължителен. Ако липсва първият параметър, се използва стойност по подразбиране 0. Ако липсва вторият параметър, се връща целият фрагмент до края на списъка. Ако третият параметър не е зададен, за стъпка се приема 1.

Примери:
```python
s = [1, 2, 3, 4, 5, 6]
print(s[::-1])  # Извежда елементите в обратен ред
print(s[:-1])   # Принтира списъка без последния елемент
print(s[1:])    # Принтира без първия елемент
print(s[0:2])   # Първите два елемента от списъка
print(s[-1:])   # Последният елемент от списъка
```

## Операции със списък

### Конкатенация на списъци
Конкатенацията на списъци се извършва с помощта на оператора **+**.

Пример:

```python
s = [1, 2, 3, 4, 5, 6]
s1 = [9, 8]
s2 = s + s1
print(s2)  # Резултат: [1, 2, 3, 4, 5, 6, 9, 8]
```

Многомерни списъци
Всеки елемент от списъка може да съдържа друг списък, кортеж или речник.

Пример:

```python
s = [[1, 2, 3, 4], ["a", "b", "c"], [10, 20]]
print(s[0][3])  # Достъпваме 4-тия елемент на първия списък (извежда 4)
print(s[2][0])  # Достъпваме 1-вия елемент на третия списък (извежда 10)
```

### Обхождане на елементи на списък

За обхождане на списък може да използваме for цикъл:

```python
s = [1, 2, 3, 4, 5, 6]
for i in s:
    print(i, end=" ")  # Принтиране на всеки елемент
```

Също така, може да използваме функцията range():

```python
s = [1, 2, 3, 4, 5, 6]
for i in range(len(s)):
    print(s[i], end=" ")  # Принтиране на всеки елемент по индекс
```

### Търсене на елемент в списък
За да проверим дали елемент съществува в списък, използваме оператора in. Този метод работи само за едномерни списъци.

Пример:

```python
s = [1, 2, 3, 4, 5, 6]
for i in range(len(s)):
    print(s[i], end=" ")  # Принтиране на всеки елемент по индекс
```

Може да разберем дали един елемент е в списък с оператор **in** , но този метод работи само за едномерни списъци! За търсене на елемент в многомерни списъци трябва да се използва обхождане на елементите в списъка

```python
s = [2, 4, 6, 8]
print(4 in s)  # Извежда True
```

## Методи за търсене

Метод index(): връща индекса на елемента в списъка. Ако елементът не съществува, връща грешка ValueError.

Метод count(): връща броя на елементите с определена стойност.

Функции min() и max(): намират съответно елемента с най-малка и най-голяма стойност в списъка.

## Добавяне и премахване на елементи в списък

append(): добавя елемент в края на списъка.

insert(): поставя елемент на посочена позиция.

pop(): премахва елемент с даден индекс и го връща. Ако не се зададе индекс, премахва последния елемент.

remove(): премахва елемент с дадена стойност.

Оператор del(): премахва елемент с даден индекс, без да връща стойност.

Пример:

```python
s = [2, 4, 6, 8, 2]
s.append(22)  # Добавя 22 в края
print(s)
s += [44, 88]  # Добавя 44 и 88 в края
print(s)
s.insert(0, 90)  # Поставя 90 в началото
print(s)
s.pop(0)  # Премахва първия елемент
print(s)
```

## Разбъркване на елементи и избиране на случаен елемент

Функцията shuffle() от модула random служи за разбъркване на списъка. За избиране на случаен елемент се използва choice().

Пример:

```python
import random

s = [2, 4, 6, 8, 2]
random.shuffle(s)  # Разбърква елементите
print(s)
print(random.choice(s))  # Избира случаен елемент
```

Методът reverse() обръща последователността на елементите в списъка:

```python
s.reverse()
print(s)
```

## Сортиране на списък

За сортиране на списък се използва методът sort(). Методът променя списъка без да връща нищо.

Формат:

```python
sort(key=None, reverse=False)
```

Пример:

```python
s = [45, 10, 55, 5, 35]
s.sort()  # Сортиране във възходящ ред
print(s)
s.sort(reverse=True)  # Сортиране в низходящ ред
print(s)

s1 = ["s", "T", "a", "E", "f"]
s1.sort(key=str.lower)  # Сортиране с игнориране на регистъра
print(s1)
```

# 2. Кортежи

Кортежите са последователности , подобно на списъците, но за разлика от списъците кортежите са неизменяеми. Кортежите могат да съдържат елементи от различен тип.
Кортежите се създават, като изброим елементите им, разделени със запетая, и ги оградим в кръгли скоби ().

```python
k = (7, 5, 3)  # Създаване на кортеж от 3 елемента
print(k)  # Извежда (7, 5, 3)
```

## Разлика между списъци и кортежи:

- Списък се създава с квадратни скоби []:
```python
list_var = [1, 2, 3]
```
- Кортеж се създава с кръгли скоби ():
```python
tuple_var = (1, 2, 3)
```

Използване на функцията tuple()

Може да създадем кортеж, като използваме функцията tuple(), която преобразува дадена последователност (например списък или низ) в кортеж.

Пример:
```python
tup = tuple([10, 20, 30])  # Преобразуване на списък в кортеж
print(tup)  # Извежда (10, 20, 30)

tup1 = tuple('python')  # Преобразуване на низ в кортеж
print(tup1)  # Извежда ('p', 'y', 't', 'h', 'o', 'n')

tup2 = tuple()  # Създаване на празен кортеж
print(tup2)  # Извежда ()
```

## Операции с кортежи:

- Обръщане към елемент по индекс:

```python
print(tup[1])  # Достъп до елемента на индекс 1 (20)
```

- Конкатенация на два кортежа:

 ```python
new_tup = (1, 2) + (3, 4)  
print(new_tup)  # Извежда (1, 2, 3, 4)
```

- Проверка за наличие на елемент:

```python
print(20 in tup)  # Извежда True, защото 20 е в кортежа
```

- Повторение на кортеж:

```python
repeat_tup = (1, 2) * 3  
print(repeat_tup)  # Извежда (1, 2, 1, 2, 1, 2)
```

- Получаване на сечение от кортеж:

```python
print(tup[0:2])  # Извежда (10, 20) – първите два елемента
```

## Важни характеристики:

Кортежите, за разлика от списъците, са неизменяеми (immutable), което означава, че след като са създадени, техните елементи не могат да се променят. Неизменяемите типоже данни зареждат по-бързо в програмата. Имайте го впредвид с напредването на вашите знания. Винаги когато можете, използвайте неизменяеми типове данни.


Кортежите поддържат два основни метода за работа с елементите им:

- index(<стойност>, <начало>, <край>): Връща индекса на първото срещане на елемента с посочената стойност. Ако елементът не е намерен, връща грешка ValueError.

Пример:

```python
tup = (7, 5, 3, 6, 1)
print(tup.index(1))  # Резултат: 4 (индексът на елемента 1)
```

- count(<стойност>): Връща броя на срещанията на елемента в кортежа.

```python
tup = (7, 5, 3, 6, 1)
print(tup.count(5))  # Резултат: 1 (5 се среща веднъж)
```

Обхождане на елементите на кортеж
Можем да обхождаме елементите на кортежа с помощта на цикъл for.

Пример:

```python
tup = (7, 5, 3, 6, 1)
for i in tup:
    print(i, end=" ")  # Резултат: 7 5 3 6 1
```

Функция len()

Функцията len() връща броя на елементите в кортежа.

Пример:

```python
tup = (7, 5, 3, 6, 1)
print(len(tup))  # Резултат: 5 (броят на елементите в кортежа)
```

# 3.Речник

Речникът е набор от обекти, достъпни посредством ключ. Речниците могат да съдържат данни от различен тип и могат да се влагат. Елементите на речниците са в произволен порядък, затова се използва ключ за достъп до елементите, а не индекс, защото реда на добавяне е без значение. Речниците са особено полезни при създаване на така наречените ".config" файлове за по-комплекси програми.

Речниците *НЕ* поддържат операциите : конкатенация , повторение , сечение

- Създаване на речник

Чрез изполаване на функцията dict()

dict(<ключ1> = <стойност1> , ... , <ключ N> = <стойност N>)

dict(<списък с кортежи от по два елемента - ключ и стойност>)

```python
d = dict()
d1 = dict(name="ivan" , last_name = "petrov")
d3 = dict([("name" , "polina") , ("L_name" , "koleva")])
print(d3)
print(d1)
```

Речник може да създадем и като го запълваме елемент по елемент

```python
d = {}
d["name"] = "petyr"
d["l_name"] = "kolev"
```

Може също във фигурните скоби да зададете всички елементи на речника

```python
d = {"name":"ivan" , "last_name":"ivanov"}
print(d)
```

⚠️ При създаването на речник в променливата не се пази самия речник, а препратка към него, затова когато искаме да копираме речник трябва да използваме метода copy(), а не оператор за присвояване.

## Операции с речници

- достъп до елемент - осъществява се с помощта на ключ. При опит да се достъпи елемент с несъществуващ ключ се генерира изключение : KeyError: "fname"

⚠️ От тук нататък, ще се изисква от вас да добавяте Error-Handling за горната грешка във всеки един код който пишете.

```python
d = {"name" : "ivan" , "last_name" : "ivanov"}
d["name"]
print(d["fname"])  # KeyError : "fname"

#Можем да проверим дали даден ключ съществува с оператор in

b = "fname" in d
print(b) # False
```


